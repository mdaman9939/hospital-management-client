import{q as f,r as c,j as e}from"./index-C8M8d5TP.js";import{C as i,a as r}from"./CRow-DwbOyR1O.js";import{C,a as E}from"./CCardBody-BC-1MHGB.js";import{C as N}from"./CCardHeader-Cy4Bd0Ol.js";import{C as b}from"./CForm-w6XIb02x.js";import{C as s}from"./CFormLabel-Dc_uzIQC.js";import{C as l}from"./CFormInput-Bd3bcSFW.js";import{C as v}from"./CFormSelect-DPn45vPc.js";import{a as I}from"./index.esm-D35apfu2.js";import"./CFormControlWrapper-CObUvOP_.js";import"./CFormControlValidation-1FHZm8X5.js";const A=()=>{const p=f();c.useEffect(()=>{localStorage.getItem("token")||p("/login")},[p]);const[a,x]=c.useState({name:"",employeeId:"",designation:"",department:"",contactNumber:"",email:"",dateOfJoining:""}),[j,g]=c.useState([]),m="http://localhost:1000/api/employee-records",h=localStorage.getItem("token");c.useEffect(()=>{(async()=>{try{const n=await fetch(m,{method:"GET",headers:{Authorization:`Bearer ${h}`}});if(!n.ok)throw new Error("Failed to fetch employee records");const d=await n.json();g(d.reverse())}catch(n){console.error("Error fetching employee records:",n)}})()},[m,h]);const o=t=>{const{name:n,value:d}=t.target;x(y=>({...y,[n]:d}))},u=async()=>{try{const t=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(a)}),n=await t.json();if(t.ok)g(d=>[...d,n.newRecord]),x({name:"",employeeId:"",designation:"",department:"",contactNumber:"",email:"",dateOfJoining:""});else throw new Error(n.message||"Error saving employee record.")}catch(t){console.error("Error submitting employee details:",t),alert("Error saving employee record.")}};return e.jsx(i,{children:e.jsx(r,{xs:12,children:e.jsxs(C,{className:"mb-4",children:[e.jsx(N,{children:e.jsx("strong",{children:"Employee Records Management"})}),e.jsxs(E,{children:[e.jsxs(b,{children:[e.jsxs(i,{children:[e.jsxs(r,{md:6,children:[e.jsx(s,{htmlFor:"name",children:"Employee Name"}),e.jsx(l,{type:"text",id:"name",name:"name",value:a.name,onChange:o,placeholder:"Enter employee name"})]}),e.jsxs(r,{md:6,children:[e.jsx(s,{htmlFor:"employeeId",children:"Employee ID"}),e.jsx(l,{type:"text",id:"employeeId",name:"employeeId",value:a.employeeId,onChange:o,placeholder:"Enter employee ID"})]})]}),e.jsxs(i,{className:"mt-3",children:[e.jsxs(r,{md:6,children:[e.jsx(s,{htmlFor:"designation",children:"Designation"}),e.jsx(l,{type:"text",id:"designation",name:"designation",value:a.designation,onChange:o,placeholder:"Enter designation (e.g., Nurse, Technician)"})]}),e.jsxs(r,{md:6,children:[e.jsx(s,{htmlFor:"department",children:"Department"}),e.jsxs(v,{id:"department",name:"department",value:a.department,onChange:o,children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"nursing",children:"Nursing"}),e.jsx("option",{value:"lab",children:"Lab Technicians"}),e.jsx("option",{value:"administration",children:"Administration"})]})]})]}),e.jsxs(i,{className:"mt-3",children:[e.jsxs(r,{md:6,children:[e.jsx(s,{htmlFor:"contactNumber",children:"Contact Number"}),e.jsx(l,{type:"tel",id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:o,placeholder:"Enter contact number"})]}),e.jsxs(r,{md:6,children:[e.jsx(s,{htmlFor:"email",children:"Email"}),e.jsx(l,{type:"email",id:"email",name:"email",value:a.email,onChange:o,placeholder:"Enter email address"})]})]}),e.jsx(i,{className:"mt-3",children:e.jsxs(r,{md:6,children:[e.jsx(s,{htmlFor:"dateOfJoining",children:"Date of Joining"}),e.jsx(l,{type:"date",id:"dateOfJoining",name:"dateOfJoining",value:a.dateOfJoining,onChange:o})]})}),e.jsx(i,{className:"mt-4",children:e.jsx(r,{md:2,children:e.jsx(I,{color:"primary",onClick:u,children:"Save Record"})})})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("h5",{children:"Employee Records"}),j.length>0?e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Designation"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Contact Number"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Date of Joining"})]})}),e.jsx("tbody",{children:j.map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.employeeId}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.designation}),e.jsx("td",{children:t.department}),e.jsx("td",{children:t.contactNumber}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.dateOfJoining})]},n))})]}):e.jsx("p",{children:"No employee records available"})]})]})]})})})};export{A as default};
