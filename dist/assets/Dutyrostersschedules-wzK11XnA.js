import{q as S,r as m,j as e}from"./index-C8M8d5TP.js";import{C as c,a as s}from"./CRow-DwbOyR1O.js";import{C as v,a as D}from"./CCardBody-BC-1MHGB.js";import{C as R}from"./CCardHeader-Cy4Bd0Ol.js";import{C as T}from"./CForm-w6XIb02x.js";import{C as l}from"./CFormLabel-Dc_uzIQC.js";import{C as h}from"./CFormInput-Bd3bcSFW.js";import{C as p}from"./CFormSelect-DPn45vPc.js";import{a as N}from"./index.esm-D35apfu2.js";import{C as E,a as I,b as y,c as n,d as b,e as o}from"./CTable-DhOiOdMA.js";import"./CFormControlWrapper-CObUvOP_.js";import"./CFormControlValidation-1FHZm8X5.js";const G=()=>{const x=S();m.useEffect(()=>{localStorage.getItem("token")||x("/login")},[x]);const[r,f]=m.useState({staffName:"",staffRole:"",contactInfo:"",dutyStart:"",dutyEnd:"",shiftType:"",assignedDate:"",assignedWard:""}),[j,g]=m.useState([]),u=async()=>{try{const t=localStorage.getItem("token"),i=await(await fetch("http://localhost:1000/api/duty-roster",{headers:{Authorization:`Bearer ${t}`}})).json();console.log("Fetched Data:",i),Array.isArray(i.data)?g(i.data):console.error("Invalid data format received from API.")}catch(t){console.error("Error fetching duty roster:",t)}};m.useEffect(()=>{u()},[]);const d=t=>{const{id:a,value:i}=t.target;f({...r,[a]:i})},C=async t=>{t.preventDefault();try{const a=localStorage.getItem("token"),i=await fetch("http://localhost:1000/api/duty-roster",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(r)});i.ok?(u(),f({staffName:"",staffRole:"",contactInfo:"",dutyStart:"",dutyEnd:"",shiftType:"",assignedDate:"",assignedWard:""})):console.error("Error saving duty roster:",i.statusText)}catch(a){console.error("Error saving duty roster:",a)}};return e.jsx(c,{children:e.jsx(s,{xs:12,children:e.jsxs(v,{className:"mb-4",children:[e.jsx(R,{children:e.jsx("strong",{children:"Duty Rosters and Schedules"})}),e.jsxs(D,{children:[e.jsxs(T,{onSubmit:C,children:[e.jsxs(c,{children:[e.jsxs(s,{md:4,children:[e.jsx(l,{htmlFor:"staffName",children:"Staff Name"}),e.jsx(h,{type:"text",id:"staffName",placeholder:"Enter staff name",value:r.staffName,onChange:d})]}),e.jsxs(s,{md:4,children:[e.jsx(l,{htmlFor:"staffRole",children:"Role"}),e.jsxs(p,{id:"staffRole",value:r.staffRole,onChange:d,children:[e.jsx("option",{children:"Select Role"}),e.jsx("option",{value:"doctor",children:"Doctor"}),e.jsx("option",{value:"nurse",children:"Nurse"}),e.jsx("option",{value:"admin",children:"Administrative Staff"})]})]}),e.jsxs(s,{md:4,children:[e.jsx(l,{htmlFor:"contactInfo",children:"Contact Information"}),e.jsx(h,{type:"tel",id:"contactInfo",placeholder:"Phone number or email",value:r.contactInfo,onChange:d})]})]}),e.jsxs(c,{className:"mt-3",children:[e.jsxs(s,{md:4,children:[e.jsx(l,{htmlFor:"dutyStart",children:"Duty Start Time"}),e.jsx(h,{type:"time",id:"dutyStart",value:r.dutyStart,onChange:d})]}),e.jsxs(s,{md:4,children:[e.jsx(l,{htmlFor:"dutyEnd",children:"Duty End Time"}),e.jsx(h,{type:"time",id:"dutyEnd",value:r.dutyEnd,onChange:d})]}),e.jsxs(s,{md:4,children:[e.jsx(l,{htmlFor:"shiftType",children:"Shift Type"}),e.jsxs(p,{id:"shiftType",value:r.shiftType,onChange:d,children:[e.jsx("option",{children:"Select Shift"}),e.jsx("option",{value:"morning",children:"Morning"}),e.jsx("option",{value:"afternoon",children:"Afternoon"}),e.jsx("option",{value:"night",children:"Night"})]})]})]}),e.jsxs(c,{className:"mt-3",children:[e.jsxs(s,{md:6,children:[e.jsx(l,{htmlFor:"assignedDate",children:"Assigned Date"}),e.jsx(h,{type:"date",id:"assignedDate",value:r.assignedDate,onChange:d})]}),e.jsxs(s,{md:6,children:[e.jsx(l,{htmlFor:"assignedWard",children:"Assigned Ward/Department"}),e.jsx(h,{type:"text",id:"assignedWard",placeholder:"e.g., ICU, General Ward, Pediatrics",value:r.assignedWard,onChange:d})]})]}),e.jsx(c,{className:"mt-4 text-center",children:e.jsx(s,{md:12,children:e.jsx(N,{color:"primary",type:"submit",children:"Save Duty Roster"})})})]}),j.length>0&&e.jsx(c,{className:"mt-5",children:e.jsx(s,{md:12,children:e.jsxs(E,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(I,{children:e.jsxs(y,{children:[e.jsx(n,{children:"#"}),e.jsx(n,{children:"Staff Name"}),e.jsx(n,{children:"Role"}),e.jsx(n,{children:"Contact"}),e.jsx(n,{children:"Duty Start"}),e.jsx(n,{children:"Duty End"}),e.jsx(n,{children:"Shift"}),e.jsx(n,{children:"Assigned Date"}),e.jsx(n,{children:"Ward/Dept"})]})}),e.jsx(b,{children:j.map((t,a)=>e.jsxs(y,{children:[e.jsx(o,{children:a+1}),e.jsx(o,{children:t.staffName}),e.jsx(o,{children:t.staffRole}),e.jsx(o,{children:t.contactInfo}),e.jsx(o,{children:t.dutyStart}),e.jsx(o,{children:t.dutyEnd}),e.jsx(o,{children:t.shiftType}),e.jsx(o,{children:t.assignedDate}),e.jsx(o,{children:t.assignedWard})]},a))})]})})})]})]})})})};export{G as default};
